<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Exam WebApp</title>
    <script>
  window.onerror = function(message, source, lineno, colno, error) {
    alert("Error: " + message + "\nLine: " + lineno);
  };
  window.addEventListener("unhandledrejection", function(promiseRejectionEvent) { 
    alert("Firebase Error: " + promiseRejectionEvent.reason);
  });
</script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="loader" class="loader-container">
        <div class="spinner"></div>
        <p style="margin-top:10px; color:#666;">Please wait...</p>
    </div>

    <section id="auth-screen" class="active-screen">
        <div class="auth-box">
            <h1>Exam<span>Pro</span></h1>
            <p>ржЖржкржирж╛рж░ ржкрзНрж░рж╕рзНрждрзБрждрж┐ ржпрж╛ржЪрж╛ржЗ ржХрж░рзБржи</p>
            
            <div class="input-group">
                <i class="fas fa-envelope"></i>
                <input type="email" id="auth-email" placeholder="ржЗржорзЗржЗрж▓ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕">
            </div>
            <div class="input-group">
                <i class="fas fa-lock"></i>
                <input type="password" id="auth-pass" placeholder="ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб">
            </div>
            
            <button onclick="handleLogin()" class="btn-primary">рж▓ржЧ ржЗржи</button>
            <button onclick="handleSignup()" class="btn-outline">ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ ржЦрзБрж▓рзБржи</button>
            
            <div class="divider">ржЕржержмрж╛</div>
            <button id="google-btn" class="btn-google">
                <i class="fab fa-google"></i> ржЧрзБржЧрж▓ ржжрж┐рзЯрзЗ рж▓ржЧржЗржи ржХрж░рзБржи
            </button>
        </div>
    </section>

    <section id="app-screen">
        
        <header>
            <div class="header-content">
                <h2 id="page-title">HOME</h2>
                <div class="user-badge" onclick="logoutUser()" title="Logout">
                    <i class="fas fa-power-off"></i>
                </div>
            </div>
        </header>

        <main id="main-content">
            
            <div id="view-home" class="view active-view">
                <div class="welcome-card">
                    <h3>рж╕рзНржмрж╛ржЧрждржо, <span id="u-name">Student</span> ЁЯСЛ</h3>
                    <p>ржЖржЬржХрзЗрж░ ржПржХрзНрж╕рж╛ржо ржжрж┐рждрзЗ ржкрзНрж░рж╕рзНрждрзБржд?</p>
                </div>
                <h3 class="section-title">ржЪрж▓ржорж╛ржи ржПржХрзНрж╕рж╛ржорж╕ржорзВрж╣</h3>
                <div id="exam-list-container" class="grid-list">
                    <p style="text-align:center; color:#999;">рж▓рзЛржбрж┐ржВ...</p>
                </div>
            </div>

            <div id="view-exam" class="view">
                <div class="timer-bar">
                    <span id="exam-subject">Subject Name</span>
                    <div class="timer">
                        <i class="far fa-clock"></i> <span id="timer-display">00:00</span>
                    </div>
                </div>
                <div id="question-area">
                    </div>
                <button onclick="submitExam()" class="btn-primary floating-btn">Submit Exam</button>
            </div>

            <div id="view-profile" class="view">
                <div class="profile-header">
                    <div class="avatar"><i class="fas fa-user"></i></div>
                    <h2 id="p-name">Loading...</h2>
                    <p id="p-email">...</p>
                </div>
                <div class="stats-box">
                    <h3>ржЕрждрзАржд ржлрж▓рж╛ржлрж▓</h3>
                    <div id="history-list">
                        </div>
                </div>
            </div>

            <div id="view-admin" class="view">
                <div class="admin-tabs">
                    <button class="tab-btn active" onclick="switchAdminTab('create')">ржирждрзБржи ржПржХрзНрж╕рж╛ржо</button>
                    <button class="tab-btn" onclick="switchAdminTab('bulk')">ржмрж╛рж▓рзНржХ ржЖржкрж▓рзЛржб</button>
                </div>

                <div id="tab-create" class="admin-section active">
                    <h3>ржирждрзБржи ржПржХрзНрж╕рж╛ржо рждрзИрж░рж┐ ржХрж░рзБржи</h3>
                    <input type="text" id="new-exam-title" placeholder="ржПржХрзНрж╕рж╛ржорзЗрж░ ржирж╛ржо (ржпрзЗржоржи: ржоржбрзЗрж▓ ржЯрзЗрж╕рзНржЯ рзз)">
                    <input type="text" id="new-exam-subject" placeholder="ржмрж┐рж╖рзЯ (ржпрзЗржоржи: ржмрж╛ржВрж▓рж╛)">
                    <input type="number" id="new-exam-time" placeholder="рж╕ржорзЯ (ржорж┐ржирж┐ржЯрзЗ)">
                    <button onclick="createNewExam()" class="btn-primary">рж╕рзЗржн ржХрж░рзБржи</button>
                    
                    <h3 style="margin-top:20px;">ржПржХрзНрж╕рж╛ржо рж▓рж┐рж╕рзНржЯ (ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ)</h3>
                    <div id="admin-exam-list">Loading...</div>
                </div>

                <div id="tab-bulk" class="admin-section">
                    <h3>ржкрзНрж░рж╢рзНржи ржпрзЛржЧ ржХрж░рзБржи (JSON)</h3>
                    <select id="bulk-exam-select" style="margin-bottom:10px; width:100%; padding:10px;">
                        <option value="">ржЖржЧрзЗ ржПржХржЯрж┐ ржПржХрзНрж╕рж╛ржо рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи</option>
                    </select>
                    <p class="info-text">ржирж┐ржЪрзЗ JSON ржлрж░ржорзНржпрж╛ржЯрзЗ ржкрзНрж░рж╢рзНржи ржкрзЗрж╕рзНржЯ ржХрж░рзБржи:</p>
                    <textarea id="bulk-json" rows="10" placeholder='[
  {
    "q": "ржмрж╛ржВрж▓рж╛ржжрзЗрж╢рзЗрж░ рж░рж╛ржЬржзрж╛ржирзА ржХрж┐?",
    "options": ["ржврж╛ржХрж╛", "ржЦрзБрж▓ржирж╛", "рж╕рж┐рж▓рзЗржЯ", "ржмрж░рж┐рж╢рж╛рж▓"],
    "correct": 1
  }
]'></textarea>
                    <button onclick="uploadBulkQuestions()" class="btn-primary">ржкрзНрж░рж╢рзНржи ржЖржкрж▓рзЛржб ржХрж░рзБржи</button>
                    <button onclick="fillSampleJson()" class="btn-outline">рж╕рзНржпрж╛ржорзНржкрж▓ ржХржкрж┐ ржХрж░рзБржи</button>
                </div>
            </div>

        </main>

        <nav class="bottom-nav">
            <div class="nav-item active" onclick="navTo('home')">
                <i class="fas fa-home"></i>
                <span>рж╣рзЛржо</span>
            </div>
            <div class="nav-item" onclick="navTo('profile')">
                <i class="fas fa-chart-pie"></i>
                <span>ржкрзНрж░рзЛржлрж╛ржЗрж▓</span>
            </div>
            <div class="nav-item" id="nav-admin" style="display:none;" onclick="navTo('admin')">
                <i class="fas fa-shield-alt"></i>
                <span>ржЕрзНржпрж╛ржбржорж┐ржи</span>
            </div>
        </nav>

    </section>

    <script type="module" src="script.js"></script>
</body>
</html>
